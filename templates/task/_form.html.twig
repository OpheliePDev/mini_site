{{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}

    <fieldset class="form-fieldset">
        {{ form_label(form.title, 'Titre', {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.title, {'attr': {'class': 'form-input-base', 'placeholder': 'Titre de la tâche'}}) }}
        {{ form_errors(form.title, {'attr': {'class': 'form-error'}}) }}
    </fieldset>

    <fieldset class="form-fieldset">
        {{ form_label(form.description, 'Description', {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.description, {'attr': {'class': 'form-input-base h-32 resize-y', 'placeholder': 'Détails'}}) }}
        {{ form_errors(form.description, {'attr': {'class': 'form-error'}}) }}
    </fieldset>

    <fieldset class="form-fieldset">
        {{ form_label(form.priority, 'Priorité', {'label_attr': {'class': 'form-label'}}) }}
        {# La classe .form-input-base s'applique aussi aux selects #}
        {{ form_widget(form.priority, {'attr': {'class': 'form-input-base'}}) }}
        {{ form_errors(form.priority, {'attr': {'class': 'form-error'}}) }}
    </fieldset>

    {# --- Bloc de Date de Création (Personnalisé) --- #}
    <article class="form-readonly-group">
        
        <header class="form-group-header">
            <svg class="form-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
            Date de création
        </header>

        <div class="mb-2">
            {# Applique la classe spécifique pour le champ en lecture seule #}
            {{ form_widget(form.createdAt, {
                'attr': {
                    'class': 'form-control-readonly',
                    'readonly': true
                }
            }) }}
        </div>

        <p class="text-xs text-gray-500 italic text-center">
            <svg class="w-3 h-3 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            Cette date est fixée automatiquement lors de la création de la tâche.
        </p>

        {{ form_errors(form.createdAt, {'attr': {'class': 'form-error'}}) }}
    </article>


    {# Bouton de soumission #}
    <button type="submit" class="btn-base btn-primary w-full mt-6">
        {{ button_label|default('Enregistrer') }}
    </button>
    
    {# Suppression de la ligne erronée et rendu de la balise de fin de formulaire #}
    {{ form_end(form) }}
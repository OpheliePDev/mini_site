{% extends 'base.html.twig' %}

{% block title %}Détails de la tâche : {{ task.title }}{% endblock %}

{% block body %}
    
    <section class="main-content-wrapper">
        
        <header class="text-center mb-8">
            <h1 class="page-title">{{ task.title }}</h1>
            
            {# Indicateur de statut visible et stylisé #}
            <span class="text-lg font-medium 
                {% if task.isDone %}
                    text-green-600
                {% else %}
                    text-orange-500
                {% endif %}
            ">
                Statut : {{ task.isDone ? '✅ Terminée' : '⏳ En cours' }}
            </span>
        </header>

        <article class="bg-white p-6 rounded-lg shadow-xl border-t-4 
            {% if task.isDone %}
                border-gray-400
            {% else %}
                border-green-700
            {% endif %}
        ">
            
            <dl class="space-y-4">
                
                {# Priorité avec badge stylisé #}
                <div class="flex items-center justify-between border-b pb-2">
                    <dt class="font-semibold text-gray-700">Priorité</dt>
                    <dd>
                        {% if task.priority %}
                            <span class="badge 
                                {% if task.priority|lower == 'high' %}badge-high
                                {% elseif task.priority|lower == 'medium' %}badge-medium
                                {% else %}badge-low
                                {% endif %}">
                                {{ task.priority|capitalize }}
                            </span>
                        {% else %}
                            <span class="text-gray-500 italic">Non définie</span>
                        {% endif %}
                    </dd>
                </div>

                {# Description #}
                <div class="border-b pb-2">
                    <dt class="font-semibold text-gray-700 mb-1">Description</dt>
                    <dd class="text-gray-800 leading-relaxed whitespace-pre-line">{{ task.description }}</dd>
                </div>

                {# Date de Création #}
                <div class="flex items-center justify-between border-b pb-2">
                    <dt class="font-semibold text-gray-700">Créée le</dt>
                    <dd class="text-gray-600">{{ task.createdAt ? task.createdAt|date('d/m/Y H:i') : 'N/A' }}</dd>
                </div>

                {# ID (souvent moins important, en bas) #}
                <div class="flex items-center justify-between pt-2 text-sm text-gray-500">
                    <dt>ID</dt>
                    <dd>{{ task.id }}</dd>
                </div>
            </dl>
        </article>
        
        <nav class="flex justify-center space-x-4 mt-8">
            <a href="{{ path('app_task_index') }}" class="btn-base btn-secondary">
                ← Retour aux tâches
            </a>

            <a href="{{ path('app_task_edit', {'id': task.id}) }}" class="btn-base btn-warning">
                ✍️ Modifier
            </a>

            <div class="inline-block">
                {% include 'task/_delete_form.html.twig' with {'task': task} %}
            </div>
        </nav>

    </section>
{% endblock %}